
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2017-03-09
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>DSL extensions for IPF module adapters | ipf-platform-camel-core</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
	</head>

	<body class="page-moduleadapters project-ipf-platform-camel-core" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href=".."><span class="color-highlight">IPF</span> Open eHealth Integration Platform</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a></li>
							<li ><a href="https://github.com/oehf/ipf" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a></li>
									<li ><a href="../ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a></li>
									<li ><a href="../ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a></li>
									<li ><a href="../ipf-modules-cda/index.html" title="CDA Support">CDA Support</a></li>
									<li ><a href="index.html" title="Camel Groovy layer">Camel Groovy layer</a></li>
									<li ><a href="../ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a></li>
									<li ><a href="../ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a></li>
									<li ><a href="../ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a></li>
									<li ><a href="../dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a></li>
									<li ><a href="../ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a></li>
									<li ><a href="../ipf-tutorials/index.html" title="Tutorials">Tutorials</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="../" id="bannerLeft"><h1><br/><span class="color-highlight">IPF</span> Open eHealth Integration Platform</h1></a>
					<p class="lead">eHealth standards on steroids</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="DSL_extensions_for_IPF_module_adapters">DSL extensions for IPF module adapters</h2>
 </div> 
 <p>The <a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/package-summary.html"><tt>org.openehealth.ipf.commons.core.modules.api</tt></a> package, which is part of the <tt>ipf-commons-core</tt> component, defines a number of interfaces representing typical message processors like</p> 
 <ul> 
  <li><a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/Validator.html"><tt>Validator</tt></a>,</li> 
  <li><a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/Aggregator.html"><tt>Aggregator</tt></a></li> 
  <li><a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/Transmogrifer.html"><tt>Transmogrifer</tt></a> (a transformer)</li> 
 </ul> 
 <p>The intention of these interfaces was to define message processors that are independent of integration infrastructures like Apache Camel in order to increase their reusability in other contexts.</p> 
 <p>The integration of these message processors into IPF routes is done via generic module adapters. They translate from Camel-specific interfaces to the interfaces and are provided by the <tt>ipf-platform-camel-core</tt> component.</p> 
 <p><i>Note</i>: For quite some time, Camel provides <a class="externalLink" href="https://camel.apache.org/bean-integration.html">bean integration</a>, a very flexible way to integrate POJOs into Camel routes.</p> 
 <p>This section is organized in the following way.</p> 
 <ul> 
  <li>Detailed description of the <tt>transmogrify</tt> extension. Many concepts described here also apply to other module adapter extensions.</li> 
  <li>Overview of the remaining module adapter extensions. This overview only covers topics that haven’t been discussed for the transmogrify extension.</li> 
 </ul> 
 <div class="section"> 
  <h3 id="Transmogrifier">Transmogrifier</h3> 
  <p>The easiest way to describe the DSL extensions for IPF module adapters is to start with an example. Let’s use the <a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/Transmogrifer.html"><tt>org.openehealth.ipf.commons.core.modules.api.Transmogrifier</tt></a> interface for that purpose. Inspired by <a class="externalLink" href="https://en.wikipedia.org/wiki/Calvin_hobbes">Calvin and Hobbes</a>, a <a href="images/transmogrifier.png" data-lightbox="page">transmogrifier</a> converts anything into whatever you like.</p> 
  <p>Transmogrification is accompanied by a loud <i>zap</i>:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    public interface Transmogrifier&lt;S, T&gt; {

        T zap(S object, Object... params);

    }
</pre> 
   </div> 
  </div> 
  <p>Implementations of <tt>Transmogrifier</tt> are used for message transformation. Transformation input is given by the object parameter and optionally some additional params. The transformation result is the return value of the <tt>zap</tt> method. To include a <tt>Transmogrifier</tt> instance into a Camel route we use the <tt>transmogrify</tt> DSL extension:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    // this is a Groovy route
    Transmogrifier transmogrifier = new MyTransmogrifier()
    from('direct:input')
        .transmogrify(transmogrifier)
        .to('mock:output')

</pre> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Inclusion_Pattern">Inclusion Pattern</h4> 
   <p>There are three different ways of including a transmogrifier into a Camel route:</p> 
   <ul> 
    <li>Pass a transmogrifier object as argument to the <tt>transmogrify</tt> method. This has already been shown in the example route above.</li> 
    <li>Pass the name of a transmogrifier bean as argument to the <tt>transmogrify</tt> method (see below). A bean with that name must exist in the Camel registry.</li> 
    <li>Define a transmogrifier logic inline using a Closure (see below). This is comparable to implement an anonymous Transmogrifier class.</li> 
   </ul> 
   <div class="source"> 
    <div class="source"> 
     <pre>    from('direct:input1')
        .transmogrify('myTransmogrifierBean')
        .to('mock:output')

    from('direct:input2')
        .transmogrify { body, headers -&gt;
            def result = ... // create result from input body and headers
            return result    // return the transformation result
        }
        .to('mock:output')
</pre> 
    </div> 
   </div> 
   <p>This pattern also applies to all other DSL extensions for IPF module adapters: <tt>verify</tt>, <tt>parse</tt>, <tt>render</tt>, and <tt>aggregationStrategy</tt>.</p> 
  </div> 
  <div class="section"> 
   <h4 id="Input_and_Parameters">Input and Parameters</h4> 
   <p>Default arguments to the <tt>Transmogrifier.zap(S object, Object... params)</tt> method are:</p> 
   <ul> 
    <li>The in-message body for the object parameter.</li> 
    <li>The in-message headers for the params parameter.</li> 
   </ul> 
   <p>A transmogrify closure may define a one or two parameters:</p> 
   <ul> 
    <li>The first parameters corresponds to the object parameter of the <tt>zap</tt> method. The default argument is the in-message body.</li> 
    <li>The second parameter corresponds to the params parameter of the <tt>zap</tt> method. The default argument is a Map containing the in-message headers.</li> 
   </ul> 
   <p>Input to the zap method as well as the transmogrify closure can be customized via the following modifiers:</p> 
   <ul> 
    <li><tt>input</tt> : Camel expression or closure to be used as input</li> 
    <li><tt>params</tt>: Camel expression or closure to be used as params</li> 
    <li><tt>staticParams</tt>: Object with static params</li> 
   </ul> 
   <p>The following snippet causes the transmogrifier’s <tt>zap</tt> method to be called with the message’s <i>foo</i>-header as first argument and the messages <i>bar</i>-header as the second argument:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    from('direct:input')
        .transmogrify { fooHeader, barHeader -&gt;
            // ...
        }
        .input { it.in.headers.foo }
        .params { it.in.headers.bar }
        .to('mock:output')
</pre> 
    </div> 
   </div> 
   <p>The <tt>params</tt> DSL extension also supports predefined expressions. These are accessible by calling <tt>params</tt> without arguments. The following predefined expressions are currently supported as part of the DSL:</p> 
   <ul> 
    <li><tt>headers()</tt>: message headers (default for transmogrifiers)</li> 
    <li><tt>header('foo')</tt>: message foo-header</li> 
    <li><tt>builder()</tt>: a Groovy XML builder</li> 
    <li><tt>headersAndBuilder()</tt>: message headers and a Groovy XML builder (params array of length 2)</li> 
   </ul> 
   <p>Thus, the example above could be rewritten to:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    from('direct:input')
        .transmogrify { fooHeader, barHeader -&gt;
            // ...
        }
        .input { it.in.headers.foo }
        .params().header('bar')
        .to('mock:output')
</pre> 
    </div> 
   </div> 
   <p>The <tt>staticParams</tt> extension can be used to pass constant values to the transmogrifier or transmogrifier closure. This extension method defines a variable argument parameter. For example to pass a String array with elements ‘a’, ‘b’ and ‘c’:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    from('direct:input')
        .transmogrify { body, stringArray -&gt;
            // ...
        }
        .staticParams('a', 'b', 'c')
        .to('mock:output')
</pre> 
    </div> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Output">Output</h4> 
   <p>The return value of the <tt>Transmogrifier.zap(S object, Object... params)</tt> method or the return value of the transmogrify closure is written to the <tt>org.apache.camel.Exchange</tt> object from which the input was taken. It depends on the exchange pattern to which exchange message the result is written.</p> 
   <p>If the exchange is out-capable (i.e. <tt>exchange.getPattern().isOutCapable()</tt> returns true) then the result is written to the exchange’s out-message body, otherwise, it is written to the in-message body. Furthermore, if the exchange is out-capable, the in-message is copied onto the out-message before the result is written (this is useful e.g. for preserving message headers along a precessing chain).</p> 
  </div> 
  <div class="section"> 
   <h4 id="Transmogrifier_implementations">Transmogrifier implementations</h4> 
   <p>IPF provides three Transmogrifier implementations out of the box:</p> 
   <ul> 
    <li><a href="../apidocs/org/openehealth/ipf/commons/xml/XsltTransmogrifier.html"><tt>org.openehealth.ipf.commons.xml.XsltTransmogrifier</tt></a> for xslt transforming XML documents</li> 
    <li><a href="../apidocs/org/openehealth/ipf/commons/xml/SchematronTransmogrifier.html"><tt>org.openehealth.ipf.commons.xml.SchematronTransmogrifier</tt></a> for creating Schematron validation reports from XML documents</li> 
    <li><a href="../apidocs/org/openehealth/ipf/commons/xml/XqjTransmogrifier.html"><tt>org.openehealth.ipf.commons.xml.XqjTransmogrifier</tt></a> for xquering XML documents or collections</li> 
   </ul> 
   <div class="section"> 
    <h5 id="XSLT_and_Schematron">XSLT and Schematron</h5> 
    <p>The XSLT implementations are “by-products” for Schematron validation, but they can be used independently as well. Compared to Camel’s <a class="externalLink" href="https://camel.apache.org/xslt.html">xslt endpoint</a>, the IPF counterpart</p> 
    <ul> 
     <li>can use variable stylesheets</li> 
     <li>caches XSLT templates for better performance</li> 
     <li>accepts explicit XSLT parameters (not just as Camel message header)</li> 
    </ul> 
    <p>The input is automatically converted into a <tt>StreamSource</tt>. By default, all Camel headers are added as parameters which are available in the stylesheet unless you define parameters by either using <tt>params(...)</tt> or <tt>staticParams(...)</tt>.</p> 
    <div class="source"> 
     <div class="source"> 
      <pre>    from('direct:input1')
        .transmogrify().xslt().staticParams('path/to/stylesheet') // static stylesheet
        .to('mock:output')

    from('direct:input1')
        .transmogrify().xslt().staticParams('path/to/stylesheet', parameterMap) // static stylesheet with parameters
        .to('mock:output')

    from('direct:input3')
        .setHeader('stylesheet', constant('path/to/stylesheet'))
        .transmogrify().xslt().params().header('stylesheet') // dynamic stylesheet
        .to('mock:output')

    // In most cases you will need the SchematronValidator, which scans the Schematron report
    // for failed assertions. Use only if you require custom processing of the report in the
    // route.

    from('direct:input3')
        .transmogrify().schematron().staticParams('path/to/rules', options ) // static rules
        .to('mock:output')

    from('direct:input4')
        .setHeader('rules', constant('path/to/rules'))
        .transmogrify('schematron').params().header('rules') // dynamic rules
        .to('mock:output')

</pre> 
     </div> 
    </div> 
    <p>By default, XSLT transformations return a <tt>javax.xml.transform.Result</tt> object, which is, however, not very useful for further processing. IPF’s XSLT-related transmogrifiers therefore return a <tt>String</tt> by default. This can be influenced by using a Class parameter to the xslt()/schematron() extensions or with a subsequent call to <tt>convertBodyTo(Class)</tt>:</p> 
    <div class="source"> 
     <div class="source"> 
      <pre>    from('direct:input1')
        .transmogrify().xslt(InputStream.class).staticParams('path/to/stylesheet')
        .to('mock:output')

    from('direct:input2')
        .transmogrify().xslt().staticParams('path/to/stylesheet')
        .convertBodyTo(InputStream.class)
        .to('mock:output')
</pre> 
     </div> 
    </div> 
   </div> 
   <div class="section"> 
    <h5 id="XQuery">XQuery</h5> 
    <p>Additionally, an <a class="externalLink" href="https://www.w3.org/TR/xquery/">XQuery</a> implementation is provided on top of the <a class="externalLink" href="http://xqj.net/">XQJ API</a>. In the actual state it uses the Saxon’s XQJ implementation. The <tt>XqjTransmogrifier</tt> is implemented similar to the <tt>XsltTransmogrifier</tt> and can be used to execute xqueries to the Apache Camel’s exchange body.</p> 
    <p>All extensions used with the <tt>org.openehealth.ipf.commons.xml.XsltTransmogrifier</tt> like <tt>params</tt> and <tt>staticParams</tt> can be used also with the XQuery Transmogrifier. The main difference with the Apache Camel endpoing is that the <tt>XqjTransmogrifier</tt> uses the IPF’s <tt>org.openehealth.ipf.commons.xml.ClasspathUriResolver</tt>. This allows to reference external document nodes or collections directly from the classpath.</p> 
    <div class="source"> 
     <div class="source"> 
      <pre>    from('direct:input24') // using a dedicated XqjTransmogrifier bean
        .convertBodyTo(StreamSource.class)
        .transmogrify('xqj').staticParams('xquery/extract.xq', [id:'someid'])
        .to('mock:output')

    from('direct:input29') // passing classpath parameters as stream
        .transmogrify().xquery()
        .staticParams('xquery/extract-map-document.xq', [id:'someid',
            map: new StreamSource(new ClassPathResource('xquery/mapping.xml').getInputStream())])
        .to('mock:output')

    from('direct:input29') // passing parameters as map
        .transmogrify().xquery().params{
            [(XqjTransmogrifier.RESOURCE_LOCATION) : 'xquery/extract-map-document.xq',
              map: new StreamSource(new ClassPathResource('xquery/mapping.xml').getInputStream()),
              id:'someid']}
        .to('mock:output')
</pre> 
     </div> 
    </div> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Validator">Validator</h3> 
  <p>The API in the <tt>ipf-commons-core</tt> module defines an <a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/Validator.html"><tt>org.openehealth.ipf.commons.core.modules.api.Validator</tt></a> interface for message validation.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>public interface Validator&lt;S, P&gt; {

    void validate(final S message, final P profile);

}
</pre> 
   </div> 
  </div> 
  <p>It defines a single <tt>validate</tt> method that validates a message against a profile. If validation fails, an <a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/ValidationException.html"><tt>org.openehealth.ipf.commons.core.modules.api.ValidationException</tt></a> is thrown.</p> 
  <p>The validator is included into Camel routes via the <tt>verify</tt> DSL extension. The <tt>verify</tt> extension accepts either a validator object, a validator bean name or a validator closure as argument. If a closure is used, a failed validation is either indicated by throwing an <tt>org.openehealth.ipf.commons.core.modules.api.ValidationException</tt> or by just returning false. If false is returned, IPF generates a ValidationException internally.</p> 
  <p>Some examples:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    // validation will fail if the in-message body doesn't equal 'blah'
    from('direct:input1')
         .verify {body -&gt; body == 'blah'}
         .to('mock:output')

    // validation will fail because a ValidationException is thrown directly
    from('direct:input2')
         .verify { throw new ValidationException('always fail') }
         .to('mock:output')

    // a second parameter is used for passing a validation profile. By default it is null but it can be customized
    // via the staticProfile DSL extension
    from('direct:input3')
         .verify {body, profile -&gt;
             body == profile
         }
         .staticProfile('blah')
         .to('mock:output')

    // input is used to pass the in-message's foo-header as first argument to the validation closure.
    // If the foo-header doesn't equal 'abcd' validation will fail.
    from('direct:input4')
         .verify {fooHeader, profile -&gt;
             fooHeader == profile
         }
         .input { it.in.headers.foo }
         .staticProfile('abcd')
         .to('mock:output')

    // a validation profile is obtained from the in-messages's customProfile header using the profile() DSL extension and a closure
    from('direct:input5')
         .verify(...)
         .input(...)
         .profile { exchange -&gt;
             exchange.in.headers.customProfile
         }
         .to('mock:output')

    // can also use validator objects
         ...
         .verify(new MyCustomValidator())
         ...

    // can use validator beans
         ...
         .verify('myValidatorBean')
         ...
</pre> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Skipping_Validation">Skipping Validation</h4> 
   <p>It is possible to switch off validation by means of a Camel message header. When there is input message header named <tt>org.openehealth.ipf.platform.camel.core.adapter.ValidatorAdapter#NEED_VALIDATION_HEADER_NAME</tt> and its value equals to <tt>Boolean.FALSE</tt>, the validation step will be skipped. This gives the possibility to validate conditionally based of user-defined properties and/or make it configurable e.g. via JMX.</p> 
   <p>Please be aware that the aforementioned Camel message header will remain untouched and deactivate subsequent validation steps as well.</p> 
  </div> 
  <div class="section"> 
   <h4 id="XSD_and_Schematron_validation">XSD and Schematron validation</h4> 
   <p>IPF provides a Validator implementation that validates an XML Source against an <i>W3C XML Schema</i>. The schema location value can be either a URL or a non-URL string, in the latter case the classpath is searched for the schema resource.</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    from('direct:input1')
         .validate().xsd().staticProfile('schema location')
         .to('mock:output')
</pre> 
    </div> 
   </div> 
   <p>IPF also provides a <tt>Validator</tt> implementation that validates an XML Source against a set of <i>Schematron</i> rules.</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    import org.openehealth.ipf.commons.xml.SchematronProfile;
    ...
    from('direct:input1')
         .validate().schematron().staticProfile(new SchematronProfile('rules location', options))
         .to('mock:output')
</pre> 
    </div> 
   </div> 
   <p>Note that you have to provide an instance of <tt>SchematronProfile</tt>, not just the plain Schematron rules location. The rules location value can be either a URL or a non-URL string, in the latter case the classpath is searched for the schema resource.</p> 
   <p>The options parameter is optional. If present, it must be of type <tt>Map&lt;String, Object&gt;</tt>. Its purpose is to configure Schematron’s validation process. Please refer to the <a class="externalLink" href="http://www.schematron.com">Schematron website</a> for more details.</p> 
   <table border="0" class="bodyTable table table-striped table-hover"> 
    <thead> 
     <tr class="a"> 
      <th>option key </th> 
      <th>description </th> 
      <th>values </th> 
      <th>default</th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td>phase </td> 
      <td>Select the phase for validation. Schematron allows for staged validation by assigning phases to validation rules. </td> 
      <td>NMTOKEN or #ALL </td> 
      <td>#ALL</td> 
     </tr> 
     <tr class="a"> 
      <td>allow-foreign </td> 
      <td>Pass non-Schematron elements and rich markup to the generated stylesheet </td> 
      <td>‘true’ or ‘false’ </td> 
      <td>‘false’</td> 
     </tr> 
     <tr class="b"> 
      <td>diagnose </td> 
      <td>Add the diagnostics to the assertion test in reports </td> 
      <td>‘true’ or ‘false’ </td> 
      <td>‘true’</td> 
     </tr> 
     <tr class="a"> 
      <td>property </td> 
      <td>Experimental: Add properties to the assertion test in reports </td> 
      <td>‘true’ or ‘false’ </td> 
      <td>‘true’</td> 
     </tr> 
     <tr class="b"> 
      <td>generate-paths </td> 
      <td>Generate the @location attribute with XPaths </td> 
      <td>‘true’ or ‘false’ </td> 
      <td>‘true’</td> 
     </tr> 
     <tr class="a"> 
      <td>sch.exslt.imports </td> 
      <td>semi-colon delimited string of filenames for some EXSLT implementations </td> 
      <td>string </td> 
      <td>’‘ | optimize | Use only when the schema has no attributes as the context nodes | ‘visit-no-attributes’| ’’</td> 
     </tr> 
     <tr class="b"> 
      <td>generate-fired-rule </td> 
      <td>Generate fired-rule elements. Significantly increases report size </td> 
      <td>‘true’ or ‘false’ </td> 
      <td>‘true’</td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Parser">Parser</h3> 
  <p>The API in the <tt>ipf-commons-core</tt> module defines an <a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/Parser.html"><tt>org.openehealth.ipf.commons.core.modules.api.Parser</tt></a> interface for parsing an external representation of information into an internal model.</p> 
  <p>Examples:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    from('direct:input1')
        .parse(new MyParser())
        .to('mock:output')

    from('direct:input2')
        .parse('myParserBean')
        .input { it.in.headers.foo }
        .params { it.in.headers.bar }
        .to('mock:output')
</pre> 
   </div> 
  </div> 
  <p><i>Note</i>: Prefer using Camel’s <a class="externalLink" href="https://camel.apache.org/data-format.html">Data Format</a> or <a class="externalLink" href="https://camel.apache.org/bean-integration.html">bean integration</a> for this purpose.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Renderer">Renderer</h3> 
  <p>The API in the <tt>ipf-commons-core</tt> module defines an <a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/Renderer.html"><tt>org.openehealth.ipf.commons.core.modules.api.Renderer</tt></a> interface for creating an external representation of an internal model.</p> 
  <p>Examples:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    from('direct:input1')
        .render(new MyRenderer())
        .to('mock:output')

    from('direct:input2')
        .render('myRendererBean')
        .input { it.in.body[0] }
        .params { it.in.headers.bar }
        .to('mock:output')
</pre> 
   </div> 
  </div> 
  <p><i>Note</i>: Prefer using Camel’s <a class="externalLink" href="https://camel.apache.org/data-format.html">Data Format</a> or <a class="externalLink" href="https://camel.apache.org/bean-integration.html">bean integration</a> for this purpose.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Aggregator">Aggregator</h3> 
  <p>The <a href="../apidocs/org/openehealth/ipf/commons/core/modules/api/Aggregator.html"><tt>org.openehealth.ipf.commons.core.modules.api.Aggregator</tt></a> interface is a <tt>transmogrifier</tt> that combines/aggregates a collection of input object into a result object. The result object is the return value of the <tt>zap</tt> method.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    public interface Transmogrifier&lt;S, T&gt; {
        T zap(S object, Object... params);
    }

    public interface Aggregator&lt;S, T&gt; extends Transmogrifier&lt;Collection&lt;S&gt;, T&gt;
</pre> 
   </div> 
  </div> 
  <p>The <tt>aggregationStrategy</tt> DSL extension can be used to include an <tt>Aggregator</tt> into Camel routes. The extension supports an aggregator object, a bean name or a closure as argument. The created Camel <tt>AggregationStrategy</tt> can then be used with e.g. <tt>enrich</tt>, <tt>multicast</tt> or other DSL elements that expect an <tt>org.apache.camel.processor.aggregate.AggregationStrategy</tt>.</p> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#DSL_extensions_for_IPF_module_adapters" title="DSL extensions for IPF module adapters">DSL extensions for IPF module adapters <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li class="dropdown"><a href="#Transmogrifier" title="Transmogrifier">Transmogrifier <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Inclusion_Pattern" title="Inclusion Pattern">Inclusion Pattern</a>
		<li><a href="#Input_and_Parameters" title="Input and Parameters">Input and Parameters</a>
		<li><a href="#Output" title="Output">Output</a>
		<li class="dropdown"><a href="#Transmogrifier_implementations" title="Transmogrifier implementations">Transmogrifier implementations <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#XSLT_and_Schematron" title="XSLT and Schematron">XSLT and Schematron</a>
		<li><a href="#XQuery" title="XQuery">XQuery</a>
				<li class="divider"></li>
			</ul>
		</li>
			</ul>
		</li>
		<li class="dropdown"><a href="#Validator" title="Validator">Validator <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Skipping_Validation" title="Skipping Validation">Skipping Validation</a>
		<li><a href="#XSD_and_Schematron_validation" title="XSD and Schematron validation">XSD and Schematron validation</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li><a href="#Parser" title="Parser">Parser</a>
		<li><a href="#Renderer" title="Renderer">Renderer</a>
		<li><a href="#Aggregator" title="Aggregator">Aggregator</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="../" title="Home">Home</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li >
							<a href="../changes-report.html" title="Release notes">Release notes</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Download</li>
						<li >
							<a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a>
						</li>
						<li >
							<a href="../license.html" title="License">License</a>
						</li>
						<li class="nav-header">Development</li>
						<li >
							<a href="../development.html" title="Development">Development</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/issues/" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
						<li class="nav-header">Submodules</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li >
							<a href="../ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a>
						</li>
						<li >
							<a href="../ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a>
						</li>
						<li >
							<a href="../ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a>
						</li>
						<li >
							<a href="../ipf-modules-cda/index.html" title="CDA Support">CDA Support</a>
						</li>
						<li >
							<a href="index.html" title="Camel Groovy layer">Camel Groovy layer</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a>
						</li>
						<li >
							<a href="../ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a>
						</li>
						<li >
							<a href="../dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a>
						</li>
						<li >
							<a href="../ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a>
						</li>
						<li >
							<a href="../ipf-tutorials/index.html" title="Tutorials">Tutorials</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven Reports</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2017 <a href="http://www.openehealth.org/">Open eHealth Foundation</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 3.2-SNAPSHOT. </span><span class="publishDate">Last Published: 2017-03-09. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
