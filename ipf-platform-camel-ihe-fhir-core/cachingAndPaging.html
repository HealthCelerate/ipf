
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2017-03-09
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Caching and Paging FHIR endpoint parameters | ipf-platform-camel-ihe-fhir-core</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
	</head>

	<body class="page-cachingandpaging project-ipf-platform-camel-ihe-fhir-core" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href=".."><span class="color-highlight">IPF</span> Open eHealth Integration Platform</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a></li>
							<li ><a href="https://github.com/oehf/ipf" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a></li>
									<li ><a href="../ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a></li>
									<li ><a href="../ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a></li>
									<li ><a href="../ipf-modules-cda/index.html" title="CDA Support">CDA Support</a></li>
									<li ><a href="../ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a></li>
									<li ><a href="../ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a></li>
									<li ><a href="../ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a></li>
									<li ><a href="../ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a></li>
									<li ><a href="../dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a></li>
									<li ><a href="../ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a></li>
									<li ><a href="../ipf-tutorials/index.html" title="Tutorials">Tutorials</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="../" id="bannerLeft"><h1><br/><span class="color-highlight">IPF</span> Open eHealth Integration Platform</h1></a>
					<p class="lead">eHealth standards on steroids</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Caching_and_Paging_FHIR_endpoint_parameters">Caching and Paging FHIR endpoint parameters</h2>
 </div> 
 <p>FHIR endpoints requesting a potentially big bundle of results are enabled to support paging <i>out of the box</i>, providing different modes regarding <i>eager</i> or <i>lazy</i> fetching of result subsets.</p> 
 <div class="section"> 
  <div class="section"> 
   <h4 id="Parameters">Parameters</h4> 
   <table border="0" class="bodyTable table table-striped table-hover"> 
    <thead> 
     <tr class="a"> 
      <th align="left">Parameter name </th> 
      <th align="left">Type </th> 
      <th align="left">Default value </th> 
      <th align="left">Short description </th> 
     </tr> 
    </thead> 
    <tbody> 
     <tr class="b"> 
      <td align="left"><tt>lazyLoadBundles</tt> </td> 
      <td align="left">Boolean </td> 
      <td align="left">false </td> 
      <td align="left">whether page request parameters are delegated to the consumer route</td> 
     </tr> 
     <tr class="a"> 
      <td align="left"><tt>cacheBundles</tt> </td> 
      <td align="left">Boolean </td> 
      <td align="left">false </td> 
      <td align="left">whether result pages are cached (only effective if <tt>lazyLoadBundles</tt> is true)</td> 
     </tr> 
    </tbody> 
   </table> 
   <p>By default, the <a href="deployment.html">FHIR servlet</a> is configured to return in pages containing 20 resources. The client may demand for smaller or larger pages by specifying the <tt>_count</tt> parameter, but the maximum is by default 100.</p> 
   <p>If <tt>lazyLoadBundles</tt> is false, the request must be treated as if no paging is in effect, i.e. the service returns all matching results. IPF cares about caching the results as well as the result size and delivers them back to the caller in the requested chunks. Repeating requests are served from this cache rather than being forwarded into the consumer route.</p> 
   <p>This behavior can get inefficient if the overall result set is usually much bigger compared to the requested result subset, particularly when the backend service has no upper result limit. In this case, <tt>lazyLoadBundles</tt> can be set to true, which causes IPF to delegate paging into the consumer route. The route is now responsible of handling the following two cases:</p> 
   <ul> 
    <li><tt>size</tt> request: IPF adds a message header called <tt>FhirRequestSizeOnly</tt> to the exchange, which indicates that the route must only return the overall result size as integer value.</li> 
    <li><tt>subset</tt> request: IPF adds two message headers called <tt>FhirFromIndex</tt> and <tt>FhirToIndex</tt> to the exchange, containing the lower and upper bound of the request result subset. The route is expected to return the corresponding list of results.</li> 
   </ul> 
   <p>By default, the results are <i>not</i> cached unless <tt>cacheBundles</tt> is set to true. In this case already returned results are cached and reused on repeating requests, if possible.</p> 
   <p>In the example below, only two entries per page were requested. As the total result size is three, the response bundle contains a link to the next page. Note that the URL is specific to the underlying FHIR library and must be treated as atomic unit.</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    &lt;Bundle xmlns=&quot;http://hl7.org/fhir&quot;&gt;
       &lt;id value=&quot;baa11115-c300-4043-8214-e72c97fe2984&quot;/&gt;
       &lt;meta&gt;
          &lt;lastUpdated value=&quot;2016-04-19T13:46:49.159+02:00&quot;/&gt;
       &lt;/meta&gt;
       &lt;type value=&quot;searchset&quot;/&gt;
       &lt;total value=&quot;3&quot;/&gt;
       &lt;link&gt;
          &lt;relation value=&quot;self&quot;/&gt;
          &lt;url value=&quot;http://localhost:8999/Patient?family=Test&amp;amp;_count=2&quot;/&gt;
       &lt;/link&gt;
       &lt;link&gt;
          &lt;relation value=&quot;next&quot;/&gt;
          &lt;url value=&quot;http://localhost:8999?_getpages=4fa95271-bb38-416b-a844-b83345280fbd&amp;amp;_getpagesoffset=2&amp;amp;_count=2&amp;amp;_bundletype=searchset&quot;/&gt;
       &lt;/link&gt;
       &lt;entry&gt;
          &lt;resource&gt;
             &lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;
                &lt;id value=&quot;4711&quot;/&gt;
                 ...
             &lt;/Patient&gt;
          &lt;/resource&gt;
       &lt;/entry&gt;
       &lt;entry&gt;
          &lt;resource&gt;
             &lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;
                &lt;id value=&quot;0815&quot;/&gt;
                ...
             &lt;/Patient&gt;
          &lt;/resource&gt;
       &lt;/entry&gt;
    &lt;/Bundle&gt;
</pre> 
    </div> 
   </div> 
   <p>After calling directly the <i>next</i> URL, the second page is returned, containing the remaining patient entry together with a link to the previous page:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    &lt;Bundle xmlns=&quot;http://hl7.org/fhir&quot;&gt;
       &lt;id value=&quot;0de9dd8b-cb98-406e-a1f6-3bb6e2a5eaa5&quot;/&gt;
       &lt;meta&gt;
          &lt;lastUpdated value=&quot;2016-04-19T14:10:17.109+02:00&quot;/&gt;
       &lt;/meta&gt;
       &lt;type value=&quot;searchset&quot;/&gt;
       &lt;total value=&quot;3&quot;/&gt;
       &lt;link&gt;
          &lt;relation value=&quot;self&quot;/&gt;
          &lt;url value=&quot;http://localhost:8999?_getpages=e8d02c62-6a96-48cc-904b-9740a7eac51f&amp;amp;_getpagesoffset=2&amp;amp;_count=2&amp;amp;_bundletype=searchset&quot;/&gt;
       &lt;/link&gt;
       &lt;link&gt;
          &lt;relation value=&quot;previous&quot;/&gt;
          &lt;url value=&quot;http://localhost:8999?_getpages=e8d02c62-6a96-48cc-904b-9740a7eac51f&amp;amp;_getpagesoffset=0&amp;amp;_count=2&amp;amp;_format=xml&amp;amp;_bundletype=searchset&quot;/&gt;
       &lt;/link&gt;
       &lt;entry&gt;
          &lt;resource&gt;
             &lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;
                &lt;id value=&quot;9999&quot;/&gt;
                ...
             &lt;/Patient&gt;
          &lt;/resource&gt;
       &lt;/entry&gt;
    &lt;/Bundle&gt;
</pre> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#Caching_and_Paging_FHIR_endpoint_parameters" title="Caching and Paging FHIR endpoint parameters">Caching and Paging FHIR endpoint parameters <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Parameters" title="Parameters">Parameters</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="../" title="Home">Home</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li >
							<a href="../changes-report.html" title="Release notes">Release notes</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Download</li>
						<li >
							<a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a>
						</li>
						<li >
							<a href="../license.html" title="License">License</a>
						</li>
						<li class="nav-header">Development</li>
						<li >
							<a href="../development.html" title="Development">Development</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/issues/" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
						<li class="nav-header">Submodules</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li >
							<a href="../ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a>
						</li>
						<li >
							<a href="../ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a>
						</li>
						<li >
							<a href="../ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a>
						</li>
						<li >
							<a href="../ipf-modules-cda/index.html" title="CDA Support">CDA Support</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a>
						</li>
						<li >
							<a href="../ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a>
						</li>
						<li >
							<a href="../dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a>
						</li>
						<li >
							<a href="../ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a>
						</li>
						<li >
							<a href="../ipf-tutorials/index.html" title="Tutorials">Tutorials</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven Reports</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2017 <a href="http://www.openehealth.org/">Open eHealth Foundation</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 3.2-SNAPSHOT. </span><span class="publishDate">Last Published: 2017-03-09. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
