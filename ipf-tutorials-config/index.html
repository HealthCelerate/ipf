
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2017-03-09
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>IPF extension tutorial | ipf-tutorials-config</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />
 
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" />
		<link href="/css/docs.css" rel="stylesheet" />
		<link href="/css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="/css/lightbox.css" rel="stylesheet" />

		<link href="/css/site.css" rel="stylesheet" />
		<link href="/css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
	</head>

	<body class="page-index project-ipf-tutorials-config" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href=".."><span class="color-highlight">IPF</span> Open eHealth Integration Platform</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a></li>
							<li ><a href="https://github.com/oehf/ipf" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../ipf-tutorials/ipf-platform-camel-ihe/index.html" title="eHealth Integration Profiles">eHealth Integration Profiles</a></li>
									<li ><a href="../ipf-tutorials/ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a></li>
									<li ><a href="../ipf-tutorials/ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a></li>
									<li ><a href="../ipf-tutorials/ipf-modules-cda/index.html" title="CDA Support">CDA Support</a></li>
									<li ><a href="../ipf-tutorials/ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a></li>
									<li ><a href="../ipf-tutorials/ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a></li>
									<li ><a href="../ipf-tutorials/ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a></li>
									<li ><a href="../ipf-tutorials/ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a></li>
									<li ><a href="../ipf-tutorials/dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a></li>
									<li ><a href="../ipf-tutorials/ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a></li>
									<li ><a href="../ipf-tutorials/ipf-tutorials/index.html" title="Tutorials">Tutorials</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a></li>
									<li ><a href="../ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a></li>
									<li ><a href="../ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a></li>
									<li ><a href="../ipf-modules-cda/index.html" title="CDA Support">CDA Support</a></li>
									<li ><a href="../ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a></li>
									<li ><a href="../ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a></li>
									<li ><a href="../ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a></li>
									<li ><a href="../ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a></li>
									<li ><a href="../dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a></li>
									<li ><a href="../ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a></li>
									<li ><a href="../ipf-tutorials/index.html" title="Tutorials">Tutorials</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="../" id="bannerLeft"><h1><br/><span class="color-highlight">IPF</span> Open eHealth Integration Platform</h1></a>
					<p class="lead">eHealth standards on steroids</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="IPF_extension_tutorial">IPF extension tutorial</h2>
 </div> 
 <p>This tutorial is targeted at developers who want to learn more about the dynamic IPF extension mechanism. Before going through this tutorial we recommend you first to read the <a href="../dynamic.html">IPF extension mechanism</a> documentation.</p> 
 <p>Please also work through the <a href="../ipf-tutorials-hl7/index.html">HL7 Tutorial</a> for the basic steps of creating IPF applications.</p> 
 <div class="section"> 
  <h3 id="Source_Code">Source Code</h3> 
  <p>The latest sources of the this tutorial are located at <a class="externalLink" href="https://github.com/oehf/ipf/tree/master/tutorials/config">https://github.com/oehf/ipf/tree/master/tutorials/config</a>. To check out the sources, clone the ipf git repository:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>git clone git://github.com/oehf/ipf.git
</pre> 
   </div> 
  </div> 
  <p>Then change into the <tt>tutorials/config</tt> directory.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Base_Application">Base Application</h3> 
  <p>The concept of this tutorial is to present how the IPF extension mechanism can be applied to extend the functionality of one “empty” IPF based application (a base application) with some custom extensions. As a part of base application you can find the following resources inside the tutorial project:</p> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <thead> 
    <tr class="a"> 
     <th>file </th> 
     <th>description</th> 
    </tr> 
   </thead> 
   <tbody> 
    <tr class="b"> 
     <td><tt>Base.java</tt> </td> 
     <td>the executable Main class of the base application</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>SampleRouteBuilder.groovy</tt> </td> 
     <td>a route definition of the base application</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>SampleModelExtensionModule.groovy</tt> </td> 
     <td>a DSL extension of the base application</td> 
    </tr> 
    <tr class="a"> 
     <td><tt>config/base-context.xml</tt> </td> 
     <td>spring beans definition of the base module</td> 
    </tr> 
    <tr class="b"> 
     <td><tt>config/extender-context.xml</tt> </td> 
     <td>spring beans definition of the extension mechanism (configurers and post processor)</td> 
    </tr> 
   </tbody> 
  </table> 
  <div class="section"> 
   <h4 id="Base_Route">Base Route</h4> 
   <p>The <tt>SampleRouteBuilder.groovy</tt> route builder defines five routes. Note that in order to be ready for customizations the SampleRouteBuilder extends the <tt>org.openehealth.ipf.platform.camel.core.config.CustomRouteBuilder</tt>:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    package org.openehealth.ipf.tutorials.config.base.route

    import org.openehealth.ipf.platform.camel.core.config.CustomRouteBuilder

    class SampleRouteBuilder extends CustomRouteBuilder {

        void configure() {

            // Receive from HTTP endpoint and forward to two direct endpoints
            from('jetty:http://0.0.0.0:8800/reverse')
                .convertBodyTo(String.class)
                .multicast().to('direct:file-save','direct:reverse-response')

            // Response: revert input string
            from('direct:reverse-response')
                .transmogrify{'reversed response: ' + it.reverse()}

            // Receive HL7 string from other HTTP endpoint, parse, validate
            from('jetty:http://0.0.0.0:8800/map')
                .convertBodyTo(String.class)
                .unmarshal().hl7()
                .verify().hl7()
                .to('direct:map')

            // Marshal mapped message and write into file
            from('direct:map')
                .marshal().hl7()
                .to('direct:file-save')
                .transmogrify{'map response ok!'}

            // Write message into destination directory
            from('direct:file-save')
                .setFileHeaderFrom('destination')
                .to('file:target/output')
        }

    }

</pre> 
    </div> 
   </div> 
   <p>The corresponding EIP diagram for the “reverse” route is shown below:</p> 
   <p><img src="images/eip-reverse.png" alt="EIP-reverse" /></p> 
  </div> 
  <div class="section"> 
   <h4 id="Base_Context">Base Context</h4> 
   <p>The spring beans definition of the base application is separated in two context xml files.</p> 
   <ul> 
    <li><tt>base-context.xml</tt> - bean definitions required for the base route</li> 
    <li><tt>extender-context.xml</tt> - defines all configurers and post processor as a part of the exension mechanism</li> 
   </ul> 
   <p>First let’s take a look at <tt>base-context.xml</tt>. Note that you’re not required to add the <tt>baseRoute</tt> bean to the <tt>camelContext</tt>. Since it extends <tt>CustomRouteBuilder</tt>, the IPF extension mechanism will do that for you.</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>    ...
      &lt;camel:camelContext id=&quot;camelContext&quot; /&gt;

      &lt;bean id=&quot;baseRoute&quot;
            class=&quot;org.openehealth.ipf.tutorials.config.base.route.SampleRouteBuilder&quot; /&gt;

      &lt;bean id=&quot;bidiMappingService&quot;
          class=&quot;org.openehealth.ipf.commons.map.SpringBidiMappingService&quot; /&gt;

    ...

</pre> 
    </div> 
   </div> 
   <p><tt>extender-context.xml</tt> defines all configurers potentially needed to extend the base application. There are three configurers, one for activating custom mappings, one for the custom DSL extensions and last one for the custom route builders. The <tt>postProcessor</tt> processes all defined configurers:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>  &lt;!-- Extension mechanism configurers and post processor --&gt;
  &lt;bean id=&quot;customMappingsConfigurer&quot;
      class=&quot;org.openehealth.ipf.commons.map.config.CustomMappingsConfigurer&quot;&gt;
      &lt;property name=&quot;mappingService&quot; ref=&quot;bidiMappingService&quot; /&gt;
  &lt;/bean&gt;

  &lt;bean id=&quot;customRouteBuilderConfigurer&quot;
        class=&quot;org.openehealth.ipf.platform.camel.core.config.CustomRouteBuilderConfigurer&quot;&gt;
    &lt;property name=&quot;camelContext&quot; ref=&quot;camelContext&quot; /&gt;
  &lt;/bean&gt;

  &lt;bean id=&quot;customExtensionModuleConfigurer&quot;
        class=&quot;org.openehealth.ipf.commons.core.extend.config.DynamicExtensionConfigurer&quot; /&gt;

  &lt;bean id=&quot;postProcessor&quot;
        class=&quot;org.openehealth.ipf.commons.core.config.SpringConfigurationPostProcessor&quot;&gt;
    &lt;property name=&quot;springConfigurers&quot; &gt;
      &lt;list&gt;
        &lt;ref bean=&quot;customMappingsConfigurer&quot; /&gt;
        &lt;ref bean=&quot;customRouteBuilderConfigurer&quot; /&gt;
        &lt;ref bean=&quot;customExtensionModuleConfigurer&quot; /&gt;
      &lt;/list&gt;
    &lt;/property&gt;
  &lt;/bean&gt;

</pre> 
    </div> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Assembly_and_Installation_of_the_Base_Application">Assembly and Installation of the Base Application</h4> 
   <p>To create a distribution package from this tutorial project run <tt>mvn clean install</tt> from the command line.</p> 
   <p>Unpack the resulting zip archive into an empty directory and run the startup script. This will start two routes accepting the requests on the port 8800.</p> 
   <p>Use a <a class="externalLink" href="http://code.fosshub.com/WizToolsorg-RESTClient/downloads">REST client</a> of your choice.</p> 
   <ul> 
    <li>POSTing a string against <tt>http://localhost:8800/reverse</tt> will return the reverted string.</li> 
    <li>POSTing a <a href="messages/message.hl7">HL7 Message</a> against <tt>http://localhost:8800/map</tt> should return a “map response ok!” with the 200 http response code. The original message content will be additionally saved in the <tt>target/output/default.txt</tt> file.</li> 
   </ul> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Adding_extensions">Adding extensions</h3> 
  <p>Now let’s can extend/customize the functionalities of both routes with usage of the IPF extension mechanism. The reverse-route will be extended by adding an additional transmogrifier, which transforms the content in html-format and saves it in the <tt>target/output/transmogrified-&lt;timestamp&gt;.html</tt> file. See the extension part on the EIP diagram below:</p> 
  <p><img src="images/eip-reverse-extended.png" alt="EIP-reverse" /></p> 
  <p>This custom logic is written in a separate route builder (also extending <tt>CustomRouteBuilder</tt>), by <i>intercepting</i> the message flow of the original route without modifying its route builder class.</p> 
  <p>This <tt>CustomInterceptor</tt> intercepts all incoming exchanges to the <tt>direct:file-save</tt> endpoint and additionally processes it by means of the <tt>htmlTransmogrifier</tt>. <tt>CustomInterceptor.groovy&acute; can be found under</tt>conf/config` folder of the unzipped assembly archive.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    class CustomInterceptor extends CustomRouteBuilder {

        void configure() {
            interceptFrom('direct:file-save')
                .transmogrify('htmlTransmogrifier')
                .setDestinationHeader()
            ...
       }
    }

</pre> 
   </div> 
  </div> 
  <p>The <tt>setDestinationHeader()</tt> Camel DSL extension is automatically activated by the IPF extension mechanism:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    class CustomModelExtensionModule implements DynamicExtension {

        static ProcessorDefinition setDestinationHeader(ProcessorDefinition delegate) {
            delegate.setHeader('destination') { exchange -&gt;
                &quot;transmogrified-${System.currentTimeMillis()}.html&quot;
            }
        }

        @Override
        String getModuleName() {
            'CustomModelExtensionModule'
        }

        @Override
        String getModuleVersion() {
            '3.0'
        }

        @Override
        boolean isStatic() {
            false
        }
    }

</pre> 
   </div> 
  </div> 
  <p>The Spring context definition for these extensions can be found in <tt>conf/extension-context.xml</tt>. Here is the snippet of the <tt>customInterceptor</tt>, <tt>htmlTransmogrifier</tt> and <tt>customExtensionModule</tt> bean definitions:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    ...
      &lt;lang:groovy id=&quot;interceptorRoute&quot;
         script-source=&quot;classpath:config/CustomInterceptor.groovy&quot; &gt;
        &lt;lang:property name=&quot;intercepted&quot; ref=&quot;baseRoute&quot; /&gt;
      &lt;/lang:groovy&gt;

      &lt;lang:groovy id=&quot;customExtensionModule&quot;
         script-source=&quot;classpath:config/CustomModelExtensionModule.groovy&quot; /&gt;

      &lt;lang:groovy id=&quot;htmlTransmogrifier&quot;
         script-source=&quot;classpath:config/HtmlTransmogrifier.groovy&quot; /&gt;
    ...
</pre> 
   </div> 
  </div> 
  <p>The <tt>intercepted</tt> property of the <tt>interceptorRoute</tt> bean tells the IPF extension mechanism to inject this custom route builder in the existing <tt>baseRoute</tt>.</p> 
  <p>If you don’t want to inject your custom route builder in any of existing route builders but only to add it to the existing CamelContext, you don’t need define this property at all.</p> 
  <p>Also note that these extension are implemented as Groovy scripts. They are compiled once <i>at runtime</i>.</p> 
  <div class="section"> 
   <h4 id="Running_the_extensions">Running the extensions</h4> 
   <p>Run the startup script with an additional parameter:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>startup.bat extension-context.xml
</pre> 
    </div> 
   </div> 
   <p>The <tt>org.openehealth.ipf.tutorials.config.base.Base</tt> class expects that first argument is the name of additional extensions Spring context file and it tries to start this context along with <tt>base-context.xml</tt> and <tt>extender-context.xml</tt>.</p> 
   <p>After submitting a POST request you should get the reversed content with the 200 http response code, and additionally the original message content saved in the <tt>target/output/transmogrified-&lt;timestamp&gt;.html</tt> file similar to the screenshot below:</p> 
   <p><img src="images/html-output.png" alt="html-output" /></p> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Adding_more_extensions">Adding more extensions</h3> 
  <p>Next we will extend the mapping route by adding a <i>custom mapping</i> and a <i>custom transmogrifier</i>, which uses this mapping definition to transform the incoming HL7v2 message.</p> 
  <p>Also, a custom exception handler is defined, which handles the exceptions of type <tt>ca.uhn.hl7v2.HL7Exception</tt>. The exception handler customizes the response to the client (response 400) and saves the exception message to the <tt>target/hl7-error/error-&lt;timestamp&gt;.txt</tt> file.</p> 
  <p><tt>CustomInterceptor.groovy</tt> intercepts all incoming exchanges to the ’direct:map&acute; endpoint and processes it with the <tt>genderTransmogrifier</tt>.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    class CustomInterceptor extends CustomRouteBuilder {

        void configure() {
            ...
            interceptFrom('direct:map')
                .transmogrify('genderTransmogrifier')
        }
    }

</pre> 
   </div> 
  </div> 
  <p>The <tt>genderTransmogrifier</tt> makes use of custom mapping definition (<tt>mapGender</tt>) to perform the transformation.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    class GenderTransmogrifier implements Transmogrifier {

        Object zap(Object msg, Object... params) {
            msg.PID[8] = msg.PID[8].mapGender()
            msg
        }
    }

</pre> 
   </div> 
  </div> 
  <p>The custom mapping is defined in <tt>conf/gender.map</tt>:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    mappings = {
        gender(
            F      : 'W',
            (ELSE) : { it }
        )
    }

</pre> 
   </div> 
  </div> 
  <p>You may have noticed when running the base application that if you tried to send some not-hl7v2 content to the “<a class="externalLink" href="http://localhost:8800/map">http://localhost:8800/map</a>” endpoint, you receive a 500 http response code with the complete exception trace as a response content.</p> 
  <p>Let’s customize this behavior by adding the custom exception handler for the <tt>ca.uhn.hl7v2.HL7Exception</tt> exception type, and do some custom handling when such an exception occurs.</p> 
  <p>This exception handler is again defined in a separate route builder <tt>CustomExceptionHandler.groovy</tt>, which also extends <tt>CustomRouteBuilder</tt>:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    class CustomExceptionHandler extends CustomRouteBuilder {

        void configure() {

            onException(ca.uhn.hl7v2.HL7Exception)
              .maximumRedeliveries(0)
              .handled(true)
              .transform().exceptionMessage()
              .setHeader(Exchange.HTTP_RESPONSE_CODE, constant(400))
              .setHeader(Exchange.FILE_NAME) { exhg -&gt;
                  &quot;error-${System.currentTimeMillis()}.txt&quot;
               }
              .to('file:target/hl7-error')
        }
    }

</pre> 
   </div> 
  </div> 
  <p>We basically extract the exception message from the exchange and return it back to the client with the 400 http response code. Additionally the exception message content will be saved in the <tt>/target/hl7-error/error-&lt;timestamp&gt;.txt</tt> file.</p> 
  <p>The Spring context definition for these extensions can be found in <tt>conf/extension-context.xml</tt> as well:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>  &lt;lang:groovy id=&quot;interceptorRoute&quot;
     script-source=&quot;classpath:config/CustomInterceptor.groovy&quot; &gt;
    &lt;lang:property name=&quot;intercepted&quot; ref=&quot;baseRoute&quot; /&gt;
  &lt;/lang:groovy&gt;

  &lt;lang:groovy id=&quot;genderTransmogrifier&quot;
     script-source=&quot;classpath:config/GenderTransmogrifier.groovy&quot; /&gt;

  &lt;lang:groovy id=&quot;exceptionHandler&quot;
     script-source=&quot;classpath:config/CustomExceptionHandler.groovy&quot; &gt;
    &lt;lang:property name=&quot;intercepted&quot; ref=&quot;baseRoute&quot; /&gt;
  &lt;/lang:groovy&gt;

  &lt;bean id=&quot;genderMapping&quot;
        class=&quot;org.openehealth.ipf.commons.map.config.CustomMappings&quot;&gt;
      &lt;property name=&quot;mappingResource&quot; value=&quot;classpath:config/gender.map&quot; /&gt;
  &lt;/bean&gt;

</pre> 
   </div> 
  </div> 
  <div class="section"> 
   <h4 id="Running_the_extensions">Running the extensions</h4> 
   <p>Run the startup script with an additional parameter:</p> 
   <div class="source"> 
    <div class="source"> 
     <pre>startup.bat extension-context.xml
</pre> 
    </div> 
   </div> 
   <p>The <tt>org.openehealth.ipf.tutorials.config.base.Base</tt> class expects that first argument is the name of additional extensions Spring context file and it tries to start this context along with <tt>base-context.xml</tt> and <tt>extender-context.xml</tt>.</p> 
   <p>After submitting a POST request of the <a href="messages/message.hl7">HL7 Message</a> you should get the “map response ok!” with the 200 http response code. Message content transformed over the genderTransmogrifier will be additionally saved in the <tt>target/output/transmogrified-&lt;timestamp&gt;.html</tt> file. Note that the transformation was successful if you have the value of “W” in the message at the position marked in the screenshot:</p> 
   <p><img src="images/html-map-output.png" alt="html-map-output" /></p> 
   <p>If you send in a plain (i.e. non-HL7v2) string to the same HTTP endpoint, the HL7Exception is now handled and you should get the exception message as response content together with the 400 http response code. The exception message should be also saved in a <tt>target/hl7-error/error-&lt;timestamp&gt;.txt</tt> file.</p> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Summary">Summary</h3> 
  <p>In this tutorial, we went through some examples on how to enhance or modify an existing base application with additional routes, extensions, exception handlers, interceptors, or mappings. Even doing so, no part of the base application was actually touched.</p> 
  <p>In practice, this extension mechanism can be used to write modular applications using the following pattern:</p> 
  <ul> 
   <li>a base module providing a potentially empty Camel context or commonly used routes, mappings etc.</li> 
   <li>use-case specific modules contributing routes, extensions, mappings etc.</li> 
  </ul> 
  <p>As all extensions can be provided as plain Groovy scripts that are only compiled when they are loaded by the base application, this mechanism is also helpful for implementing <i>customizations</i> for off-the-shelf applications.</p> 
  <p>The source code for this tutorial is located in the <a class="externalLink" href="https://github.com/oehf/ipf/tree/master/tutorials/config">ipf-tutorials-config</a> module.</p> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#IPF_extension_tutorial" title="IPF extension tutorial">IPF extension tutorial <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Source_Code" title="Source Code">Source Code</a>
		<li class="dropdown"><a href="#Base_Application" title="Base Application">Base Application <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Base_Route" title="Base Route">Base Route</a>
		<li><a href="#Base_Context" title="Base Context">Base Context</a>
		<li><a href="#Assembly_and_Installation_of_the_Base_Application" title="Assembly and Installation of the Base Application">Assembly and Installation of the Base Application</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li class="dropdown"><a href="#Adding_extensions" title="Adding extensions">Adding extensions <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Running_the_extensions" title="Running the extensions">Running the extensions</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li class="dropdown"><a href="#Adding_more_extensions" title="Adding more extensions">Adding more extensions <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Running_the_extensions" title="Running the extensions">Running the extensions</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li><a href="#Summary" title="Summary">Summary</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="../" title="Home">Home</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li >
							<a href="../changes-report.html" title="Release notes">Release notes</a>
						</li>
						<li class="nav-header">Main</li>
						<li >
							<a href="../ipf-tutorials/" title="Home">Home</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li >
							<a href="../ipf-tutorials/release-notes.html" title="Release notes">Release notes</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Download</li>
						<li >
							<a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a>
						</li>
						<li >
							<a href="../license.html" title="License">License</a>
						</li>
						<li class="nav-header">Download</li>
						<li >
							<a href="../ipf-tutorials/skin/index.html#Usage" title="Download">Download</a>
						</li>
						<li >
							<a href="../ipf-tutorials/license.html" title="License">License</a>
						</li>
						<li class="nav-header">Development</li>
						<li >
							<a href="../ipf-tutorials/development.html" title="Development">Development</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/issues/" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
						<li class="nav-header">Development</li>
						<li >
							<a href="../development.html" title="Development">Development</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/issues/" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li >
							<a href="../ipf-tutorials/ipf-platform-camel-ihe/index.html" title="eHealth Integration Profiles">eHealth Integration Profiles</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-modules-cda/index.html" title="CDA Support">CDA Support</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a>
						</li>
						<li >
							<a href="../ipf-tutorials/dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a>
						</li>
						<li >
							<a href="../ipf-tutorials/ipf-tutorials/index.html" title="Tutorials">Tutorials</a>
						</li>
						<li class="nav-header">Documentation</li>
						<li >
							<a href="../ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a>
						</li>
						<li >
							<a href="../ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a>
						</li>
						<li >
							<a href="../ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a>
						</li>
						<li >
							<a href="../ipf-modules-cda/index.html" title="CDA Support">CDA Support</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a>
						</li>
						<li >
							<a href="../ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a>
						</li>
						<li >
							<a href="../dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a>
						</li>
						<li >
							<a href="../ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a>
						</li>
						<li >
							<a href="../ipf-tutorials/index.html" title="Tutorials">Tutorials</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven documentation</li>
						<li class="nav-header">Maven Reports</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-down"></i></a>
							<ul class="nav nav-list">
						<li class="active">
							<a href="#" title="About">About</a>
						</li>
						<li >
							<a href="project-summary.html" title="Summary">Summary</a>
						</li>
						<li >
							<a href="team-list.html" title="Team">Team</a>
						</li>
						<li >
							<a href="dependencies.html" title="Dependencies">Dependencies</a>
						</li>
						<li >
							<a href="license.html" title="Licenses">Licenses</a>
						</li>
						<li >
							<a href="mail-lists.html" title="Mailing Lists">Mailing Lists</a>
						</li>
						<li >
							<a href="source-repository.html" title="Source Code Management">Source Code Management</a>
						</li>
							</ul>
						</li>
						<li >
							<a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2017 <a href="http://www.openehealth.org/">Open eHealth Foundation</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 3.2-SNAPSHOT. </span><span class="publishDate">Last Published: 2017-03-09. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="/js/lightbox.min.js"></script>
	<script src="/js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="/js/reflow-skin.js"></script>

	</body>
</html>
