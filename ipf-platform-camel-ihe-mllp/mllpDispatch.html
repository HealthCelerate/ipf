
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2017-03-09
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>mllp-dispatch component | ipf-platform-camel-ihe-mllp</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />

		<link href="http://yandex.st/highlightjs/7.5/styles/github.min.css" rel="stylesheet" />

		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
	</head>

	<body class="page-mllpdispatch project-ipf-platform-camel-ihe-mllp" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href=".."><span class="color-highlight">IPF</span> Open eHealth Integration Platform</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a></li>
							<li ><a href="https://github.com/oehf/ipf" title="GitHub project" class="externalLink">GitHub project</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="../ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a></li>
									<li ><a href="../ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a></li>
									<li ><a href="../ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a></li>
									<li ><a href="../ipf-modules-cda/index.html" title="CDA Support">CDA Support</a></li>
									<li ><a href="../ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a></li>
									<li ><a href="../ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a></li>
									<li ><a href="../ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a></li>
									<li ><a href="../ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a></li>
									<li ><a href="../dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a></li>
									<li ><a href="../ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a></li>
									<li ><a href="../ipf-tutorials/index.html" title="Tutorials">Tutorials</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
	<div class="jumbotron subhead">
		<div class="row" id="banner">
			<div class="span12">
				<div class="pull-left">
					<a href="../" id="bannerLeft"><h1><br/><span class="color-highlight">IPF</span> Open eHealth Integration Platform</h1></a>
					<p class="lead">eHealth standards on steroids</p>
				</div>
				<div class="pull-right">
				</div>
			</div>
		</div>
	</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="mllp-dispatch_component"><tt>mllp-dispatch</tt> component</h2>
 </div> 
 <p>The MLLP dispatcher allows to reuse a single TCP port for serving multiple MLLP-based transactions. This may be useful e.g. when a client application cannot be configured to use different ports for different transactions, or when firewall rules are too restrictive.</p> 
 <div class="section"> 
  <h3 id="Actors">Actors</h3> 
  <p>Only consumer side is supported. There is no mapping to a particular actor.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Dependencies">Dependencies</h3> 
  <p>In a Maven-based environment, the following dependency must be registered in <tt>pom.xml</tt>:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    &lt;dependency&gt;
        &lt;groupId&gt;org.openehealth.ipf.platform-camel&lt;/groupId&gt;
        &lt;artifactId&gt;ipf-platform-camel-ihe-mllp&lt;/artifactId&gt;
        &lt;version&gt;${ipf-version}&lt;/version&gt;
    &lt;/dependency&gt;
</pre> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Endpoint_URI_Format">Endpoint URI Format</h3> 
  <p>The endpoint URI format of the <tt>mllp-dispatch</tt> component is the following:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>&quot;mllp-dispatch://hostname:port?routes=id1,id2,...&amp;otherParameters&quot;
</pre> 
   </div> 
  </div> 
  <p>where <i>hostname</i> is either an IP address or a domain name, and <i>port</i> is a number. For the consumer side, the host name <tt>0.0.0.0</tt> allows the access from any remote host. These two obligatory URI parts represent the address of the MLLP dispatcher endpoint which is to be served by the given consumer.</p> 
  <p>The URI parameter <i>routes</i> is optional and contains a comma-separated list of route IDs. Each referenced route must be a consumer route of an IPF MLLP component.</p> 
  <p>You can also choose to omit the routes parameter and instead provide a parameter referencing a bean of type <a href="../apidocs/org/openehealth/ipf/platform/camel/ihe/mllp/core/intercept/consumer/ConsumerDispatchingInterceptor.html"><tt>org.openehealth.ipf.platform.camel.ihe.mllp.core.intercept.consumer.ConsumerDispatchingInterceptor</tt></a> to both the dispatcher endpoint and the transaction endpoints.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Behavior">Behavior</h3> 
  <p>The dispatching mechanism leverages the <a href="interceptorChain.html">MLLP interceptor machinery</a>. The dispatcher takes over network communication and, optionally, segment defragmentation, and then simply feeds the exchange to the appropriate transaction-specific interceptor chain, as shown on the figure below:</p> 
  <p><img src="images/mllp-dispatching.png" alt="MLLP Dispatching" /></p> 
  <p>Note that the transaction-specific routes served by the dispatcher still remain usable in the stand-alone mode, but their endpoints are not required to be accessible from the outside and thus can be bound e.g. to <tt>localhost</tt>, as shown in the examples below.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Example_with_explicit_route_IDs">Example with explicit route IDs</h3> 
  <div class="source"> 
   <div class="source"> 
    <pre>    void configure() throws Exception {

        // Camel does not allow empty routes, therefore a dummy processor
        // is required after from(...).  This processor will be in fact never
        // executed; it means, even .throwException(...) would be Ok here.
        from('mllp-dispatch://0.0.0.0:18500?routes=pixfeed,xadpid').process {}

        from('pix-iti8://localhost:18501')
            .routeId('pixfeed')
            .....

        from('xpid-iti64://localhost:18502')
            .routeId('xadpid')
            .....
    }

</pre> 
   </div> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Example_without_explicit_route_IDs">Example without explicit route IDs</h3> 
  <div class="source"> 
   <div class="source"> 
    <pre>void configure() throws Exception {

    // Camel does not allow empty routes, therefore a dummy processor
    // is required after from(...).  This processor will be in fact never
    // executed; it means, even .throwException(...) would be Ok here.
    from('mllp-dispatch://0.0.0.0:18500?dispatcher=#dispatcher').process {}

    from('pix-iti8://localhost:18501?dispatcher=#dispatcher')
        .routeId('pixfeed') // recommended, but not required
        .....

    from('xpid-iti64://localhost:18502?dispatcher=#dispatcher')
        .routeId('xadpid') // recommended, but not required
        .....
}

</pre> 
   </div> 
  </div> 
  <p>The dispatcher bean must be defined as follows:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>    &lt;bean id=&quot;dispatcher&quot; class=&quot;org.openehealth.ipf.platform.camel.ihe.mllp.core.intercept.consumer.ConsumerDispatchingInterceptor&quot;&gt;
        &lt;constructor-arg index=&quot;0&quot; ref=&quot;camelContext&quot;/&gt;
    &lt;/bean&gt;

</pre> 
   </div> 
  </div> 
  <p>In this case, upon Camel Context initialization the dispatcher bean is dynamically configured with the IDs of all routes whose MLLP transaction consumers reference the same dispatcher bean instance. This procedure is less error-prone because you donâ€™t have to configure route IDs anymore, however, there will be no defined order in which the dispatcher endpoint offers the message to the routes.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Basic_MLLP_Component_Features">Basic MLLP Component Features</h3> 
  <ul> 
   <li><a href="payloadLogging.html">File-Based payload logging</a></li> 
   <li><a href="secureTransport.html">Secure transport</a></li> 
  </ul> 
 </div> 
 <div class="section"> 
  <h3 id="Advanced_MLLP_Component_Features">Advanced MLLP Component Features</h3> 
  <ul> 
   <li><a href="interceptorChain.html">Interceptor chain configuration</a></li> 
   <li><a href="segmentFragmentation.html">Segment fragmentation</a></li> 
  </ul> 
  <p>Other features like audit trail, interactive response continuation, and unsolicited request fragmentation, are to be configured in the transaction-specific routes served by the given MLLP dispatcher.</p> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#mllp-dispatch_component" title="mllp-dispatch component">mllp-dispatch component <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Actors" title="Actors">Actors</a>
		<li><a href="#Dependencies" title="Dependencies">Dependencies</a>
		<li><a href="#Endpoint_URI_Format" title="Endpoint URI Format">Endpoint URI Format</a>
		<li><a href="#Behavior" title="Behavior">Behavior</a>
		<li><a href="#Example_with_explicit_route_IDs" title="Example with explicit route IDs">Example with explicit route IDs</a>
		<li><a href="#Example_without_explicit_route_IDs" title="Example without explicit route IDs">Example without explicit route IDs</a>
		<li><a href="#Basic_MLLP_Component_Features" title="Basic MLLP Component Features">Basic MLLP Component Features</a>
		<li><a href="#Advanced_MLLP_Component_Features" title="Advanced MLLP Component Features">Advanced MLLP Component Features</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Main</li>
						<li >
							<a href="../" title="Home">Home</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="GitHub project" class="externalLink">GitHub project</a>
						</li>
						<li >
							<a href="../changes-report.html" title="Release notes">Release notes</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Download</li>
						<li >
							<a href="https://github.com/oehf/ipf" title="Download" class="externalLink">Download</a>
						</li>
						<li >
							<a href="../license.html" title="License">License</a>
						</li>
						<li class="nav-header">Development</li>
						<li >
							<a href="../development.html" title="Development">Development</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/issues/" title="Issues" class="externalLink">Issues</a>
						</li>
						<li >
							<a href="https://github.com/oehf/ipf/" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
						</li>
						<li class="nav-header">Submodules</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Documentation</li>
						<li >
							<a href="../ipf-platform-camel-ihe/index.html" title="eHealth Integration Profile">eHealth Integration Profile</a>
						</li>
						<li >
							<a href="../ipf-modules-hl7/index.html" title="HL7v2 Message Processing">HL7v2 Message Processing</a>
						</li>
						<li >
							<a href="../ipf-commons-ihe-hl7v3/index.html" title="HL7 Message translation">HL7 Message translation</a>
						</li>
						<li >
							<a href="../ipf-modules-cda/index.html" title="CDA Support">CDA Support</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-core/index.html" title="Camel Groovy layer">Camel Groovy layer</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-hl7/index.html" title="Camel HL7 processing">Camel HL7 processing</a>
						</li>
						<li >
							<a href="../ipf-platform-camel-cda/index.html" title="Camel CDA processing">Camel CDA processing</a>
						</li>
						<li >
							<a href="../ipf-commons-map/index.html" title="Code System Mapping">Code System Mapping</a>
						</li>
						<li >
							<a href="../dynamic.html" title="Dynamic Registration of IPF Features">Dynamic Registration of IPF Features</a>
						</li>
						<li >
							<a href="../ipf-osgi-karaf/index.html" title="OSGi Support">OSGi Support</a>
						</li>
						<li >
							<a href="../ipf-tutorials/index.html" title="Tutorials">Tutorials</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Maven Reports</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2017 <a href="http://www.openehealth.org/">Open eHealth Foundation</a>. All Rights Reserved.</p>
				<p class="version-date"><span class="projectVersion">Version: 3.2-SNAPSHOT. </span><span class="publishDate">Last Published: 2017-03-09. </span></p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>
	<script src="http://yandex.st/highlightjs/7.5/highlight.min.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
